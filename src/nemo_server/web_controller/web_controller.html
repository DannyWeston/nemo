<!DOCTYPE html>
<html class="h-100">
  <head>
    <meta charset="utf-8" />

    <!-- Bootstrap v5.2.3 -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>

    <!-- ROS Lib JS -->
    <script type="text/javascript" src="./js/roslib.js"></script>

    <!-- Custom JS + CSS -->
    <link rel="stylesheet" href="./css/style.css">
    <script type="text/javascript" src="./js/math.js"></script>
    <script type="text/javascript" src="./js/ros.js"></script>

    <title>NEMO Web Controller</title>
</head>

<body class="d-flex flex-column h-100">
    <nav class="navbar navbar-expand-md navbar-light py-0">
        <div class="container">
            <h2 class="navbar-header py-5 mx-auto">NEMO Robot Web Controller</h2>
        </div>
    </nav>

    <main role="main"> 
        <div class="container-fluid h-100">
            <!-- Connection -->
            <div class="row mb-5">
                <h2>Status</h2>
                <div id="connectionStatus" class="mb-2">
                    <span class="innerSymbol" style="color: red;">&#9679;</span>
                    <span class="innerText">Disconnected</span>
                </div>

                <div class="col-md-6">
                    <label for="txtEndpoint" class="form-label">Robot Address:</label>
                    <input id="txtEndpoint" type="text" value="192.168.0.81:9090" />
                    
                    <button id="btnConnect" class="btn btn-primary" onclick="connectToROS();" >Connect</button>
                    <button id="btnDisconnect" class="btn btn-danger" onclick="disconnectFromROS();">Disconnect</button>
                </div>
            </div>

            <!-- Metrics -->
            <div class="row mb-5">
                <h3>Metrics</h3>

                <!-- Battery -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Battery:</h4>
                    Level: <span class="rosMetric" id="batPercentage"></span>%<br>
                    Charging: <span class="rosMetric" id="batCharging"></span><br>
                    Current Charge: <span class="rosMetric" id="batCharge"></span> Ah<br>
                    Max Charge: <span class="rosMetric" id="batCapacity"></span> Ah<br>
                    Discharge Rate: <span class="rosMetric" id="batDischarge"></span> Ah<br>
                    Voltage: <span class="rosMetric" id="batVoltage"></span> V<br>
                </div>

                <!-- Position -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Position (Metres):</h4>
                    X: <span class="rosMetric" id="odomPositionX"></span><br>
                    Y: <span class="rosMetric" id="odomPositionY"></span><br>
                    Z: <span class="rosMetric" id="odomPositionZ"></span><br>
                </div>

                <!-- Orientation -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Orientation (Radians):</h4>
                    Pitch: <span class="rosMetric" id="odomOrientationX"></span><br>
                    Roll: <span class="rosMetric" id="odomOrientationY"></span><br>
                    Yaw: <span class="rosMetric" id="odomOrientationZ"></span><br>
                </div>

                <!-- Identified Fish -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Fish In View:</h4>
                    <ul class="list-group">
                        <li class="list-group-item rosMetric fishFound" id="fishNum1">Goldfish</li>
                    </ul>
                </div>
            </div>

            <!-- Controls -->
            <div class="row mb-2">
                <h3>Controls</h3>

                <!-- Robot Status (start/stop robot) -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Robot Status</h4>
                    <button id="btnConnect" class="btn btn-primary" onclick="startRobot();" >Start</button>
                    <button id="btnDisconnect" class="btn btn-danger" onclick="stopRobot();">Stop</button>
                </div>

                <!-- Robot Control (manual/autonomous) -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Manual Control</h4>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Manual</label>
                    </div>
                </div>

                <!-- LED Lights Control -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Robot Lights</h4>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Lights</label>
                    </div>
                </div>

                <!-- Video Footage Recording -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Video Recording</h4>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Video Recording</label>
                    </div>
                </div>
            </div>

            <!-- More Controls -->
            <div class="row mb-5">
                <!-- Fish Identification -->
                <div class="col-md-3 mb-2 mb-md-0">
                    <h4>Fish Identification</h4>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Show Fish Bounding Box</label>
                    </div>
                </div>
            </div>
                    
            <!-- Camera View -->
            <div class="row">
                <div class="text-center">
                    <img class="w-100 h-100 w-md-75 h-md-75" id="imgCameraView" src="./img/placeholder.jpg" />
                </div>
            </div>
        </div>
    </main>

    <footer class="d-flex justify-content-center mt-auto py-3">
        <div class="container">
            <div class="text-center">
                &copy; DannyWeston <script>document.write(/\d{4}/.exec(Date())[0])</script>
            </div>
        </div>
    </footer>
</body>

</html>
